{% extends 'base.html.twig' %}

{% block title %}Teacher Comments | StudyCompanion+{% endblock %}

{% block body %}
    <div class="grid grid-2">
        <section class="card">
            <h1>Post Comment</h1>
            {% if students is empty %}
                <p class="note">No students in your groups yet. Ask students to join with your invite code.</p>
            {% else %}
                {{ form_start(commentForm, {attr: {class: 'form-grid'}}) }}
                    {{ form_row(commentForm.student) }}
                    {{ form_row(commentForm.content) }}
                    <button type="submit" class="btn-primary">Send comment</button>
                {{ form_end(commentForm) }}
            {% endif %}
        </section>

        <section class="card">
            <h1>All Comments</h1>
            <div class="list" style="margin-top:1rem;">
                {% for comment in comments %}
                    <div class="list-item" style="flex-direction:column; align-items:flex-start;">
                        <div style="width:100%; display:flex; justify-content:space-between; gap:.8rem;">
                            <strong><a href="{{ path('teacher_student_show', {id: comment.student.id}) }}">{{ comment.student.user.name }}</a></strong>
                            <span class="note">{{ comment.createdAt|date('Y-m-d H:i') }}</span>
                        </div>
                        <p>{{ comment.content }}</p>
                    </div>
                {% else %}
                    <p class="note">No comments posted yet.</p>
                {% endfor %}
            </div>
        </section>
    </div>
{% endblock %}
